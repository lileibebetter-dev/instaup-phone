# å¿«é€Ÿå¯åŠ¨æœ¬åœ°æ•°æ®åº“

## ğŸš€ æœ€ç®€å•çš„æ–¹æ³•ï¼šä½¿ç”¨ Dockerï¼ˆå¦‚æœå·²å®‰è£…ï¼‰

å¦‚æœä½ å·²ç»å®‰è£…äº† Docker Desktopï¼Œåªéœ€è¿è¡Œï¼š

```bash
cd yunmiaoda-app-center
docker-compose up -d postgres
```

## ğŸ“¦ æ–¹æ³• 2: å®‰è£… Homebrew + PostgreSQLï¼ˆæ¨èï¼‰

### 1. å®‰è£… Homebrew

æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œï¼š

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

å¦‚æœç½‘ç»œæœ‰é—®é¢˜ï¼Œå¯ä»¥è®¿é—® https://brew.sh/ æŸ¥çœ‹å…¶ä»–å®‰è£…æ–¹å¼ã€‚

### 2. å®‰è£…å¹¶å¯åŠ¨ PostgreSQL

```bash
# å®‰è£… PostgreSQL
brew install postgresql@16

# å¯åŠ¨æœåŠ¡
brew services start postgresql@16

# åˆ›å»ºæ•°æ®åº“
createdb yunmiaoda
```

### 3. åˆå§‹åŒ–æ•°æ®åº“ç»“æ„

```bash
cd yunmiaoda-app-center/app
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"
npx prisma db push
```

## ğŸ“¥ æ–¹æ³• 3: ç›´æ¥ä¸‹è½½ PostgreSQL

1. è®¿é—® PostgreSQL å®˜ç½‘ï¼šhttps://www.postgresql.org/download/macosx/
2. ä¸‹è½½ macOS å®‰è£…åŒ…ï¼ˆPostgres.app æˆ–å®˜æ–¹å®‰è£…å™¨ï¼‰
3. å®‰è£…åå¯åŠ¨ PostgreSQL
4. ä½¿ç”¨å›¾å½¢ç•Œé¢æˆ–å‘½ä»¤è¡Œåˆ›å»ºæ•°æ®åº“ `yunmiaoda`

## âœ… éªŒè¯æ•°æ®åº“æ˜¯å¦è¿è¡Œ

```bash
# æ£€æŸ¥ç«¯å£
lsof -ti:5432 && echo "PostgreSQL æ­£åœ¨è¿è¡Œ" || echo "PostgreSQL æœªè¿è¡Œ"

# æˆ–è€…å°è¯•è¿æ¥
psql -h localhost -U postgres -d yunmiaoda
```

## ğŸ“ æ•°æ®åº“è¿æ¥ä¿¡æ¯

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`yunmiaoda-app-center/app/.env`

```
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/yunmiaoda?schema=public"
```

- **ä¸»æœº**: localhost
- **ç«¯å£**: 5432
- **æ•°æ®åº“å**: yunmiaoda
- **ç”¨æˆ·å**: postgres
- **å¯†ç **: postgres

## ğŸ”„ å¦‚æœé‡åˆ°é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**: æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»– PostgreSQL å®ä¾‹åœ¨è¿è¡Œ
2. **æƒé™é—®é¢˜**: ç¡®ä¿å½“å‰ç”¨æˆ·æœ‰åˆ›å»ºæ•°æ®åº“çš„æƒé™
3. **è¿æ¥å¤±è´¥**: æ£€æŸ¥ PostgreSQL æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ

## ğŸ¯ å®‰è£…å®Œæˆå

é‡å¯å¼€å‘æœåŠ¡å™¨ï¼Œæ•°æ®åº“é”™è¯¯åº”è¯¥å°±ä¼šæ¶ˆå¤±äº†ï¼

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆå¦‚æœåœ¨è¿è¡Œï¼‰
lsof -ti:3000 | xargs kill

# é‡æ–°å¯åŠ¨
cd yunmiaoda-app-center/app
bash start-dev.sh
```

